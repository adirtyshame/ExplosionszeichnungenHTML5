<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.


-->
<html>
    <head>
        <title>Explosionszeichnungen</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="js/libs/jquery/jquery.min.js" type="text/javascript"></script>
        <script src="js/libs/knockout/knockout-min.js" type="text/javascript"></script>
        <script src="js/libs/knockout.mapping/knockout.mapping.js" type="text/javascript"></script>
        <script src="js/ko.js" type="text/javascript"></script>
        <script src="js/boxes.js" type="text/javascript"></script>
        <script>
            var SELECT_URL = 'http://explodedview.scooter-attack.com/select.php';
            var ENGINES_URL = 'http://explodedview.scooter-attack.com/engines/select.php';
            
//            $('#laden').click(function() {
//                fetchData();
//            });
            var model = null;
            var ez = null;
//            var motoren = null;
            function fetchData() {
                $.get(SELECT_URL, function(data) {
                    ez = new Explosionszeichnungen();
                    $.each($.parseJSON(data), function(index, value) {
                        var motor = new MotorViewModel(value.bild, value.name, value.kurz);
                        $.each(value.zuordnungen, function(i, v){
                            motor.zuordnungen.push(new ZuordnungViewModel(v.baugruppe, v.einzelteil, v.x, v.y, v.width, v.height));
                        });
                        ez.motoren.push(motor);
                    });
                    ko.applyBindings(ez);
                });
            };
//            function fetchMotoren() {
//                $.get(ENGINES_URL, function(data) {
//                    motoren = new MotorenViewModel(data);
//                    ko.applyBindings(motoren, document.getElementById('motor'));
//                });
//            };
        </script>
        <style type="text/css">
            body { margin: 0; }
            #container { position: relative; }
            #canvas { border: 1px solid #000; }
            #selects select { width: 100%; }
            #selects div { float: left; margin-right: 50px;}
            footer {position: fixed; bottom: 0px; background-color: azure; width: 100%; padding: 10px;}
        </style>
    </head>
    <body onload="fetchData();">
        <section>
            <canvas id="canvas" height="300" width="400">TODO write content</canvas>
            <button onclick="init('images/Explosionszeichnung_final.gif');">load Image</button>
        </section>
        <footer>
            <section id="selects">
                <form name="myform">

<!--                    <div>
                        <input type="button" id="laden" value="aus Datei Laden"/>
                    </div>-->

                    <div>
                        <table>
                            <caption>Motor</caption>
                            <tr>
                                <td>
                                    <select id="motor" 
                                            name="master0" 
                                            size="5" 
                                            data-bind="foreach: motoren()">
                                        <option data-bind="value: $index, text: name()"></option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <div data-bind="visible: selectedMotor">
                        <table>
                            <caption>Gruppe</caption>
                            <tr>
                                <td colspan="2">
<!--                                    <select id="gruppe" 
                                            name="master1" 
                                            size="5"
                                            data-bind="options: selectedMotor.zuordnungen,
                                                        optionsText: 'baugruppe'+'einzelteil',
                                                        optionsValue: ''"></select>-->
<!--                                    <ul data-bind="foreach: selectedMotor().zuordnungen">
                                        <li data-bind="value: baugruppe"></li>
                                    </ul>-->
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="text" id="gruppeText" value="" placeholder="Gruppenname" />
                                </td>
                                <td>
                                    <input type="button" id="add" value="hinzufÃ¼gen"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input disabled="disabled" type="button" id="removeGruppe" value="Gruppe(n) entfernen"/>
                                </td>
                            </tr>
                        </table>
                    </div>

                </form>
            </section>
        </footer>
    </body>
</html>
